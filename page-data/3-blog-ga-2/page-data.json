{"componentChunkName":"component---src-templates-blog-template-js","path":"/3-blog-ga-2/","result":{"data":{"cur":{"id":"0584702d-deb9-56a8-93eb-2cef71a07369","html":"<h2 id=\"-ì†Œê°œ\" style=\"position:relative;\"><a href=\"#-%EC%86%8C%EA%B0%9C\" aria-label=\" ì†Œê°œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ ì†Œê°œ</h2>\n<p>websocketì„ ì‚¬ìš©í•˜ì—¬ Botì„ ë§Œë“¤ì–´ë³´ìğŸ™Œ</p>\n<hr>\n<h3 id=\"ï¸-1-mattermost-bot-ë§Œë“¤ê¸°\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-1-mattermost-bot-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"ï¸ 1 mattermost bot ë§Œë“¤ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 1. Mattermost Bot ë§Œë“¤ê¸°</h3>\n<blockquote>\n<p>ë©”ë‰´ìˆœì„œ : ë”ë³´ê¸° -> í†µí•©(integration) -> Bot Account -> ë´‡ ê³„ì • ë§Œë“¤ê¸°</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABeUlEQVQoz41Sv0sDMRjtP+vuIHZwloIILiI6uPsD3ezi4KQOHURwsQhtwfbUKmfvkktyl9yTF8yR1ioGHsnd930v78v3WkUhIUSOyiiURkEpBecc6rr24LksS4RlrfX/AkIeUVUVWhe9KXa7E+xfTtF/nkErAWtdQ8AkkgyGIyTJi48pbeDcNxHgdy5jDFqPE4Xrvsbd0OD9s0Ahpb8ZUWKWZWivrWJnu4N4hXjY2Unr6mGGo5sUJ7cpBkkOrSTsAmFlHdqbB+jsneLp1eJ+pJGkVZMzRyiFgIggfyisoasaW90cG2cZ1o8/sHL4hvOe8Dmh9YZQCA5FeqJFwkDKd3RGAk5TL0fj4Za1HCtbppDgUKQs/DCMKWHKyl+y9A1JEPCXQv7XWvsiIljm34Sxv/hNfxK0RuzFeCjeNnG7vxGSIE1Tj6IovFLui/byhLGygJAQt0x1weQEi/M8n/NlMxSSMEgDEwyEQqohGeM8h3dk3WQ8bvLCs3wB8YmgDCg4iBoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ì‚¬ì§„1\"\n        title=\"ì‚¬ì§„1\"\n        src=\"/static/8f0e9801e28ebc4ec799de031fc3373f/37523/1.png\"\n        srcset=\"/static/8f0e9801e28ebc4ec799de031fc3373f/e9ff0/1.png 180w,\n/static/8f0e9801e28ebc4ec799de031fc3373f/f21e7/1.png 360w,\n/static/8f0e9801e28ebc4ec799de031fc3373f/37523/1.png 720w,\n/static/8f0e9801e28ebc4ec799de031fc3373f/302a4/1.png 1080w,\n/static/8f0e9801e28ebc4ec799de031fc3373f/07a9c/1.png 1440w,\n/static/8f0e9801e28ebc4ec799de031fc3373f/1105b/1.png 2940w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<hr>\n<h3 id=\"ï¸-2-websocket-ì„¤ì •\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-2-websocket-%EC%84%A4%EC%A0%95\" aria-label=\"ï¸ 2 websocket ì„¤ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 2. Websocket ì„¤ì •</h3>\n<blockquote>\n<ol>\n<li>ë©”íƒ€ëª¨ìŠ¤íŠ¸ ì›¹ì‚¬ì´íŠ¸ì— ë¡œê·¸ì¸í•©ë‹ˆë‹¤.</li>\n<li>í™”ë©´ ìƒë‹¨ì˜ â€˜Toolsâ€™ ë©”ë‰´ë¥¼ í´ë¦­í•©ë‹ˆë‹¤.</li>\n<li>â€˜Optionsâ€™ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</li>\n<li>ì™¼ìª½ ë©”ë‰´ì—ì„œ â€˜Serverâ€™ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</li>\n<li>â€˜Enable WebSocket serverâ€™ ì˜µì…˜ì„ í™œì„±í™”í•©ë‹ˆë‹¤.</li>\n<li>ì›¹ì†Œì¼“ ì„œë²„ ì£¼ì†Œë¥¼ ì…ë ¥í•©ë‹ˆë‹¤. (ì˜ˆ: wss://server.example.com)</li>\n<li>â€˜Saveâ€™ ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.</li>\n</ol>\n</blockquote>\n<hr>\n<h3 id=\"ï¸-3-ë´‡-ì´ˆê¸°-ì„¤ì •-ì½”ë“œ\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-3-%EB%B4%87-%EC%B4%88%EA%B8%B0-%EC%84%A4%EC%A0%95-%EC%BD%94%EB%93%9C\" aria-label=\"ï¸ 3 ë´‡ ì´ˆê¸° ì„¤ì • ì½”ë“œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 3. ë´‡ ì´ˆê¸° ì„¤ì • ì½”ë“œ</h3>\n<blockquote>\n<p>ë¨¼ì € ê´€ë¦¬ì ë„êµ¬ -> ì‚¬ìš©ì -> ë´‡ê³„ì •ì˜ ì´ë©”ì¼ê³¼ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì„¸íŒ…í•´ì£¼ì„¸ìš”<br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">(</span>\n\tSAMPLE_NAME       <span class=\"token operator\">=</span> <span class=\"token string\">\"ë©”íƒ€ë´‡\"</span>\n\tMATTERMOST_ADDR   <span class=\"token operator\">=</span> <span class=\"token string\">\"http://ë©”íƒ€ëª¨ìŠ¤íŠ¸ url\"</span>\n\tMATTERMOST_WSADDR <span class=\"token operator\">=</span> <span class=\"token string\">\"ws://ë©”íƒ€ëª¨ìŠ¤íŠ¸ url\"</span>\n\n\tUSER_EMAIL    <span class=\"token operator\">=</span> <span class=\"token string\">\"ë´‡ê³„ì •@ì´ë©”ì¼\"</span>\n\tUSER_PASSWORD <span class=\"token operator\">=</span> <span class=\"token string\">\"íŒ¨ìŠ¤ì›Œë“œ \"</span>\n\tUSER_NAME     <span class=\"token operator\">=</span> <span class=\"token string\">\"BOT\"</span>\n\tUSER_FIRST    <span class=\"token operator\">=</span> <span class=\"token string\">\"ë©”íƒ€ëª¨ìŠ¤íŠ¸\"</span>\n\tUSER_LAST     <span class=\"token operator\">=</span> <span class=\"token string\">\"ë´‡\"</span>\n\n\tTEAM_NAME         <span class=\"token operator\">=</span> <span class=\"token string\">\"metamon\"</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<hr>\n<h3 id=\"ï¸-4-ì‘ë‹µ-í•¸ë“¤ëŸ¬-ì½”ë“œ\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-4-%EC%9D%91%EB%8B%B5-%ED%95%B8%EB%93%A4%EB%9F%AC-%EC%BD%94%EB%93%9C\" aria-label=\"ï¸ 4 ì‘ë‹µ í•¸ë“¤ëŸ¬ ì½”ë“œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 4. ì‘ë‹µ í•¸ë“¤ëŸ¬ ì½”ë“œ</h3>\n<blockquote>\n<p>ë´‡ì´ ë©¤ë²„ë¡œ ë“¤ì–´ê°€ ìˆëŠ” ì±„ë„ë§Œ ë©”ì„¸ì§€ê°€ ìˆ˜ì‹ ë©ë‹ˆë‹¤<br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">{</span>\t<span class=\"token comment\">//í´ë¼ì´ì–¸íŠ¸ ì—°ê²°</span>\n\t\twebSocketClient<span class=\"token punctuation\">,</span> err <span class=\"token operator\">:=</span> model<span class=\"token punctuation\">.</span><span class=\"token function\">NewWebSocketClient4</span><span class=\"token punctuation\">(</span>MATTERMOST_WSADDR<span class=\"token punctuation\">,</span> client<span class=\"token punctuation\">.</span>AuthToken<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">if</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to connect to the web socket\"</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connected to WS\"</span><span class=\"token punctuation\">)</span>\n\t\twebSocketClient<span class=\"token punctuation\">.</span><span class=\"token function\">Listen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//ì›¹ì†Œì¼“ ì‹¤ì‹œê°„ listen</span>\n\n\t\t<span class=\"token keyword\">for</span> resp <span class=\"token operator\">:=</span> <span class=\"token keyword\">range</span> webSocketClient<span class=\"token punctuation\">.</span>EventChannel <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">HandleWebSocketResponse</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">)</span> <span class=\"token comment\">// ì±„ë„ì˜ ì´ë²¤íŠ¸ë¥¼ forë¬¸ì„ í†µí•´ ìˆ˜ì‹ </span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h3 id=\"ï¸-5-ì±„ë„-ë§¤ì„¸ì§€-ìˆ˜ì‹ -ë°-ë©”ì‹œì§€-ì „ì†¡\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-5-%EC%B1%84%EB%84%90-%EB%A7%A4%EC%84%B8%EC%A7%80-%EC%88%98%EC%8B%A0-%EB%B0%8F-%EB%A9%94%EC%8B%9C%EC%A7%80-%EC%A0%84%EC%86%A1\" aria-label=\"ï¸ 5 ì±„ë„ ë§¤ì„¸ì§€ ìˆ˜ì‹  ë° ë©”ì‹œì§€ ì „ì†¡ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 5. ì±„ë„ ë§¤ì„¸ì§€ ìˆ˜ì‹  ë° ë©”ì‹œì§€ ì „ì†¡</h3>\n<blockquote>\n<p>ë´‡ì´ ì¶”ê°€ëœ ì±„ë„ì˜ ë©”ì„¸ì§€ë¥¼ ì •ê·œí‘œí˜„ì‹ìœ¼ë¡œ ë¶„ë¦¬í•˜ê³  íŠ¹ì • ë‹¨ì–´ì— ë”°ë¼ ë©”ì„¸ì§€ë¥¼ ì‘ë‹µí•˜ëŠ” ë´‡ì„ ë§Œë“ ë‹¤<br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">func</span> <span class=\"token function\">HandleMsgFromDebuggingChannel</span><span class=\"token punctuation\">(</span>event <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>WebSocketEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">EventType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> model<span class=\"token punctuation\">.</span>WEBSOCKET_EVENT_POSTED <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span>\n\t<span class=\"token punctuation\">}</span>\n\tpost <span class=\"token operator\">:=</span> model<span class=\"token punctuation\">.</span><span class=\"token function\">PostFromJson</span><span class=\"token punctuation\">(</span>strings<span class=\"token punctuation\">.</span><span class=\"token function\">NewReader</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span><span class=\"token function\">GetData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"post\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ë©”ì„¸ì§€ìˆ˜ì‹  / ì±„ë„ID:\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>ChannelId<span class=\"token punctuation\">,</span> <span class=\"token string\">\" / ë©”ì„¸ì§€:\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">if</span> post <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> post<span class=\"token punctuation\">.</span>UserId <span class=\"token operator\">==</span> botUser<span class=\"token punctuation\">.</span>Id <span class=\"token punctuation\">{</span> <span class=\"token comment\">//ë©”ì„¸ì§€ì˜ useridê°€ ë´‡ì˜idì™€ ê°™ë‹¤ë©´ ë¬´ì‹œí•˜ë„ë¡ ì„¤ì •</span>\n\t\t\t<span class=\"token keyword\">return</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">if</span> matched<span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">:=</span> regexp<span class=\"token punctuation\">.</span><span class=\"token function\">MatchString</span><span class=\"token punctuation\">(</span><span class=\"token string\">`!ë‚ ì”¨`</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> matched <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì˜¤ëŠ˜ì˜ ë‚ ì”¨ëŠ” êµ¬ë¦„ë§ìŒ ì…ë‹ˆë‹¤\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Id<span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>ChannelId<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">return</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">if</span> matched<span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">:=</span> regexp<span class=\"token punctuation\">.</span><span class=\"token function\">MatchString</span><span class=\"token punctuation\">(</span><span class=\"token string\">`!ì˜¨ë„`</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> matched <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"í˜„ì¬ ì˜¨ë„ëŠ” 23ë„ ì…ë‹ˆë‹¤\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Id<span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>ChannelId<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">return</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h3 id=\"ï¸-6-ì „ì²´-ì½”ë“œ\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-6-%EC%A0%84%EC%B2%B4-%EC%BD%94%EB%93%9C\" aria-label=\"ï¸ 6 ì „ì²´ ì½”ë“œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 6. ì „ì²´ ì½”ë“œ</h3>\n<blockquote>\n<p>ì „ì²´ ì½”ë“œ ì…ë‹ˆë‹¤ ì•„ë˜ í¼ì¹˜ê¸°ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”<br></p>\n</blockquote>\n<details markdown=\"1\">\n<summary>ì ‘ê¸°/í¼ì¹˜ê¸°</summary>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">package</span> main\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token string\">\"os\"</span>\n\t<span class=\"token string\">\"os/signal\"</span>\n\t<span class=\"token string\">\"regexp\"</span>\n\t<span class=\"token string\">\"strings\"</span>\n\n\t<span class=\"token boolean\">_</span> <span class=\"token string\">\"github.com/go-sql-driver/mysql\"</span>\n\n\t<span class=\"token string\">\"github.com/mattermost/mattermost-server/v5/model\"</span>\n\t<span class=\"token boolean\">_</span> <span class=\"token string\">\"github.com/mattn/go-sqlite3\"</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">(</span>\n\t\tSAMPLE_NAME       <span class=\"token operator\">=</span> <span class=\"token string\">\"ë©”íƒ€ë´‡\"</span>\n\tMATTERMOST_ADDR   <span class=\"token operator\">=</span> <span class=\"token string\">\"http://ë©”íƒ€ëª¨ìŠ¤íŠ¸ url\"</span>\n\tMATTERMOST_WSADDR <span class=\"token operator\">=</span> <span class=\"token string\">\"ws://ë©”íƒ€ëª¨ìŠ¤íŠ¸ url\"</span>\n\n\tUSER_EMAIL    <span class=\"token operator\">=</span> <span class=\"token string\">\"ë´‡ê³„ì •@ì´ë©”ì¼\"</span>\n\tUSER_PASSWORD <span class=\"token operator\">=</span> <span class=\"token string\">\"íŒ¨ìŠ¤ì›Œë“œ \"</span>\n\tUSER_NAME     <span class=\"token operator\">=</span> <span class=\"token string\">\"BOT\"</span>\n\tUSER_FIRST    <span class=\"token operator\">=</span> <span class=\"token string\">\"ë©”íƒ€ëª¨ìŠ¤íŠ¸\"</span>\n\tUSER_LAST     <span class=\"token operator\">=</span> <span class=\"token string\">\"ë´‡\"</span>\n\n\tTEAM_NAME         <span class=\"token operator\">=</span> <span class=\"token string\">\"metamon\"</span>\n\tCHANNEL_LOG_NAME  <span class=\"token operator\">=</span> <span class=\"token string\">\"ì±„ë„id1 - ì±„ë„ì—ì„œ view infoë¥¼ ì„¤ì •í•˜ë©´ channel idë¥¼ í™•ì¸í• ìˆ˜ ìˆìŒ\"</span>\n\tCHANNEL_LOG_NAME2 <span class=\"token operator\">=</span> <span class=\"token string\">\"ì±„ë„id2 - ì±„ë„ì—ì„œ view infoë¥¼ ì„¤ì •í•˜ë©´ channel idë¥¼ í™•ì¸í• ìˆ˜ ìˆìŒ\"</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">var</span> client <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>Client4\n<span class=\"token keyword\">var</span> webSocketClient <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>WebSocketClient\n<span class=\"token keyword\">var</span> files <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>FileUploadResponse\n<span class=\"token keyword\">var</span> botUser <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>User\n<span class=\"token keyword\">var</span> botTeam <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>Team\n<span class=\"token keyword\">var</span> debuggingChannel <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>Channel\n\n<span class=\"token comment\">// Documentation for the Go driver can be found</span>\n<span class=\"token comment\">// at https://godoc.org/github.com/mattermost/platform/model#Client</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span>SAMPLE_NAME<span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">SetupGracefulShutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\tclient <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span><span class=\"token function\">NewAPIv4Client</span><span class=\"token punctuation\">(</span>MATTERMOST_ADDR<span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">MakeSureServerIsRunning</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">LoginAsTheBotUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">UpdateTheBotUserIfNeeded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">FindBotTeam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":smile:**`\"</span><span class=\"token operator\">+</span>SAMPLE_NAME<span class=\"token operator\">+</span><span class=\"token string\">\"ì‹œì‘`**:smile:\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> CHANNEL_LOG_NAME<span class=\"token punctuation\">)</span>\n\n\t<span class=\"token comment\">// Lets start listening to some channels via the websocket!</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">{</span>\n\t\twebSocketClient<span class=\"token punctuation\">,</span> err <span class=\"token operator\">:=</span> model<span class=\"token punctuation\">.</span><span class=\"token function\">NewWebSocketClient4</span><span class=\"token punctuation\">(</span>MATTERMOST_WSADDR<span class=\"token punctuation\">,</span> client<span class=\"token punctuation\">.</span>AuthToken<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">if</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to connect to the web socket\"</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connected to WS\"</span><span class=\"token punctuation\">)</span>\n\t\twebSocketClient<span class=\"token punctuation\">.</span><span class=\"token function\">Listen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\t\t<span class=\"token keyword\">for</span> resp <span class=\"token operator\">:=</span> <span class=\"token keyword\">range</span> webSocketClient<span class=\"token punctuation\">.</span>EventChannel <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">HandleWebSocketResponse</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">MakeSureServerIsRunning</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> props<span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">GetOldClientConfig</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"There was a problem pinging the Mattermost server.  Are you sure it's running?\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t\tos<span class=\"token punctuation\">.</span><span class=\"token function\">Exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Server detected and is running version \"</span> <span class=\"token operator\">+</span> props<span class=\"token punctuation\">[</span><span class=\"token string\">\"Version\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">LoginAsTheBotUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> user<span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">Login</span><span class=\"token punctuation\">(</span>USER_EMAIL<span class=\"token punctuation\">,</span> USER_PASSWORD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"There was a problem logging into the Mattermost server.  Are you sure ran the setup steps from the README.md?\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t\tos<span class=\"token punctuation\">.</span><span class=\"token function\">Exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\tbotUser <span class=\"token operator\">=</span> user\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">UpdateTheBotUserIfNeeded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> botUser<span class=\"token punctuation\">.</span>FirstName <span class=\"token operator\">!=</span> USER_FIRST <span class=\"token operator\">||</span> botUser<span class=\"token punctuation\">.</span>LastName <span class=\"token operator\">!=</span> USER_LAST <span class=\"token operator\">||</span> botUser<span class=\"token punctuation\">.</span>Username <span class=\"token operator\">!=</span> USER_NAME <span class=\"token punctuation\">{</span>\n\t\tbotUser<span class=\"token punctuation\">.</span>FirstName <span class=\"token operator\">=</span> USER_FIRST\n\t\tbotUser<span class=\"token punctuation\">.</span>LastName <span class=\"token operator\">=</span> USER_LAST\n\t\tbotUser<span class=\"token punctuation\">.</span>Username <span class=\"token operator\">=</span> USER_NAME\n\n\t\t<span class=\"token keyword\">if</span> user<span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">UpdateUser</span><span class=\"token punctuation\">(</span>botUser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to update the Sample Bot user\"</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t\t\tos<span class=\"token punctuation\">.</span><span class=\"token function\">Exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t\tbotUser <span class=\"token operator\">=</span> user\n\t\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Looks like this might be the first run so we've updated the bots account settings\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">FindBotTeam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> team<span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">GetTeamByName</span><span class=\"token punctuation\">(</span>TEAM_NAME<span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to get the initial load\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"or we do not appear to be a member of the team '\"</span> <span class=\"token operator\">+</span> TEAM_NAME <span class=\"token operator\">+</span> <span class=\"token string\">\"'\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t\tos<span class=\"token punctuation\">.</span><span class=\"token function\">Exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\tbotTeam <span class=\"token operator\">=</span> team\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">CreateBotDebuggingChannelIfNeeded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> rchannel<span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">GetChannelByName</span><span class=\"token punctuation\">(</span>CHANNEL_LOG_NAME<span class=\"token punctuation\">,</span> botTeam<span class=\"token punctuation\">.</span>Id<span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to get the channels\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\tdebuggingChannel <span class=\"token operator\">=</span> rchannel\n\t\t<span class=\"token keyword\">return</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span>msg <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> replyToId <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> channelid <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tpost <span class=\"token operator\">:=</span> <span class=\"token operator\">&amp;</span>model<span class=\"token punctuation\">.</span>Post<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\tpost<span class=\"token punctuation\">.</span>ChannelId <span class=\"token operator\">=</span> channelid\n\tpost<span class=\"token punctuation\">.</span>Message <span class=\"token operator\">=</span> msg\n\n\t<span class=\"token comment\">//post.RootId = replyToId</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token boolean\">_</span><span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">CreatePost</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to send a message to the logging channel\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">HandleWebSocketResponse</span><span class=\"token punctuation\">(</span>event <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>WebSocketEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">HandleMsgFromDebuggingChannel</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">HandleMsgFromDebuggingChannel</span><span class=\"token punctuation\">(</span>event <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>WebSocketEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">defer</span> <span class=\"token keyword\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">recover</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\t<span class=\"token keyword\">if</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">EventType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> model<span class=\"token punctuation\">.</span>WEBSOCKET_EVENT_POSTED <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tpost <span class=\"token operator\">:=</span> model<span class=\"token punctuation\">.</span><span class=\"token function\">PostFromJson</span><span class=\"token punctuation\">(</span>strings<span class=\"token punctuation\">.</span><span class=\"token function\">NewReader</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span><span class=\"token function\">GetData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"post\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ë©”ì„¸ì§€ìˆ˜ì‹  / ì±„ë„ID:\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>ChannelId<span class=\"token punctuation\">,</span> <span class=\"token string\">\" / ë©”ì„¸ì§€:\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">if</span> post <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">if</span> post<span class=\"token punctuation\">.</span>UserId <span class=\"token operator\">==</span> botUser<span class=\"token punctuation\">.</span>Id <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">if</span> matched<span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">:=</span> regexp<span class=\"token punctuation\">.</span><span class=\"token function\">MatchString</span><span class=\"token punctuation\">(</span><span class=\"token string\">`!ë‚ ì”¨`</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> matched <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"í˜„ì¬ ë‚ ì”¨ëŠ” 23ë„ì…ë‹ˆë‹¤\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Id<span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>ChannelId<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">return</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>err <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>AppError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\tError Details:\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\t\\t\"</span> <span class=\"token operator\">+</span> err<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\t\\t\"</span> <span class=\"token operator\">+</span> err<span class=\"token punctuation\">.</span>Id<span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\t\\t\"</span> <span class=\"token operator\">+</span> err<span class=\"token punctuation\">.</span>DetailedError<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">SetupGracefulShutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tc <span class=\"token operator\">:=</span> <span class=\"token function\">make</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">chan</span> os<span class=\"token punctuation\">.</span>Signal<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\tsignal<span class=\"token punctuation\">.</span><span class=\"token function\">Notify</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">,</span> os<span class=\"token punctuation\">.</span>Interrupt<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">go</span> <span class=\"token keyword\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">range</span> c <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">if</span> webSocketClient <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t\t\twebSocketClient<span class=\"token punctuation\">.</span><span class=\"token function\">Close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":disappointed_relieved:**`\"</span><span class=\"token operator\">+</span>SAMPLE_NAME<span class=\"token operator\">+</span><span class=\"token string\">\"ì •ì§€`**:disappointed_relieved:\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> CHANNEL_LOG_NAME<span class=\"token punctuation\">)</span>\n\t\t\tos<span class=\"token punctuation\">.</span><span class=\"token function\">Exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n</details>\n<hr>\n<h3 id=\"ì°¸ê³ ì‚¬ì´íŠ¸\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\" aria-label=\"ì°¸ê³ ì‚¬ì´íŠ¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì°¸ê³ ì‚¬ì´íŠ¸</h3>\n<blockquote>\n<p><a href=\"https://github.com/mattermost/mattermost-bot-sample-golang/blob/master/bot_sample.go\">https://github.com/mattermost/mattermost-bot-sample-golang/blob/master/bot_sample.go</a></p>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EC%86%8C%EA%B0%9C\">ğŸ‘‹ ì†Œê°œ</a></p>\n<ul>\n<li><a href=\"#%EF%B8%8F-1-mattermost-bot-%EB%A7%8C%EB%93%A4%EA%B8%B0\">âŒ¨ï¸ 1. Mattermost Bot ë§Œë“¤ê¸°</a></li>\n<li><a href=\"#%EF%B8%8F-2-websocket-%EC%84%A4%EC%A0%95\">âŒ¨ï¸ 2. Websocket ì„¤ì •</a></li>\n<li><a href=\"#%EF%B8%8F-3-%EB%B4%87-%EC%B4%88%EA%B8%B0-%EC%84%A4%EC%A0%95-%EC%BD%94%EB%93%9C\">âŒ¨ï¸ 3. ë´‡ ì´ˆê¸° ì„¤ì • ì½”ë“œ</a></li>\n<li><a href=\"#%EF%B8%8F-4-%EC%9D%91%EB%8B%B5-%ED%95%B8%EB%93%A4%EB%9F%AC-%EC%BD%94%EB%93%9C\">âŒ¨ï¸ 4. ì‘ë‹µ í•¸ë“¤ëŸ¬ ì½”ë“œ</a></li>\n<li><a href=\"#%EF%B8%8F-5-%EC%B1%84%EB%84%90-%EB%A7%A4%EC%84%B8%EC%A7%80-%EC%88%98%EC%8B%A0-%EB%B0%8F-%EB%A9%94%EC%8B%9C%EC%A7%80-%EC%A0%84%EC%86%A1\">âŒ¨ï¸ 5. ì±„ë„ ë§¤ì„¸ì§€ ìˆ˜ì‹  ë° ë©”ì‹œì§€ ì „ì†¡</a></li>\n<li><a href=\"#%EF%B8%8F-6-%EC%A0%84%EC%B2%B4-%EC%BD%94%EB%93%9C\">âŒ¨ï¸ 6. ì „ì²´ ì½”ë“œ</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\">ì°¸ê³ ì‚¬ì´íŠ¸</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"ğŸ‘‹ ì†Œê°œ websocketì„ ì‚¬ìš©í•˜ì—¬ Botì„ ë§Œë“¤ì–´ë³´ìğŸ™Œ âŒ¨ï¸ 1. Mattermost Bot ë§Œë“¤ê¸° ë©”ë‰´ìˆœì„œ : ë”ë³´ê¸° -> í†µí•©(integration) -> Bot Account -> ë´‡ ê³„ì • ë§Œë“¤ê¸°  âŒ¨ï¸ 2. Websocket ì„¤ì • ë©”íƒ€ëª¨ìŠ¤íŠ¸ ì›¹ì‚¬ì´íŠ¸ì— ë¡œê·¸ì¸í•©ë‹ˆë‹¤. í™”ë©´ ìƒë‹¨ì˜ â€˜Toolsâ€™ ë©”ë‰´ë¥¼ í´ë¦­í•©ë‹ˆë‹¤. â€˜Optionsâ€™ë¥¼ ì„ íƒí•©ë‹ˆë‹¤. ì™¼ìª½ ë©”ë‰´ì—ì„œ â€˜Serverâ€™ë¥¼ ì„ íƒí•©ë‹ˆë‹¤. â€˜Enable WebSocket serverâ€™ ì˜µì…˜ì„ í™œì„±í™”í•©ë‹ˆë‹¤. ì›¹ì†Œì¼“ ì„œë²„ ì£¼ì†Œë¥¼ ì…ë ¥í•©ë‹ˆë‹¤. (ì˜ˆ: wss://server.example.com) â€˜Saveâ€™ ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤. âŒ¨ï¸ 3. ë´‡ ì´ˆê¸° ì„¤ì • ì½”ë“œ ë¨¼ì € ê´€ë¦¬ì ë„êµ¬ -> ì‚¬ìš©ì -> ë´‡ê³„ì •ì˜ ì´ë©”ì¼ê³¼ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì„¸íŒ…í•´ì£¼ì„¸ìš” âŒ¨ï¸ 4. ì‘ë‹µ í•¸ë“¤ëŸ¬ ì½”ë“œ ë´‡ì´ ë©¤ë²„ë¡œ ë“¤ì–´ê°€ ìˆëŠ” ì±„ë„ë§Œ ë©”ì„¸ì§€ê°€ ìˆ˜ì‹ ë©ë‹ˆë‹¤ âŒ¨ï¸ 5. ì±„ë„ ë§¤ì„¸ì§€ ìˆ˜ì‹  ë° ë©”ì‹œì§€ ì „ì†¡ ë´‡ì´ ì¶”ê°€ëœ ì±„ë„ì˜ ë©”ì„¸ì§€ë¥¼ ì •ê·œí‘œí˜„ì‹ìœ¼ë¡œ ë¶„ë¦¬í•˜ê³  íŠ¹ì • ë‹¨ì–´ì— ë”°ë¼ ë©”ì„¸ì§€ë¥¼ ì‘ë‹µâ€¦","frontmatter":{"date":"May 29, 2023","title":"[ë¸”ë¡œê·¸] êµ¬ê¸€ ì• ë„ë¦¬í‹±ìŠ¤ ì—°ë™ with Gastby - Google analytics(2)","categories":"ë¸”ë¡œê·¸","author":"sb","emoji":"ğŸ¤–"},"fields":{"slug":"/3-blog-ga-2/"}},"next":{"id":"19956f2a-1445-5baf-96f0-57d6673b2d9f","html":"<h2 id=\"-ì†Œê°œ\" style=\"position:relative;\"><a href=\"#-%EC%86%8C%EA%B0%9C\" aria-label=\" ì†Œê°œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ‘‹ ì†Œê°œ</h2>\n<p>websocketì„ ì‚¬ìš©í•˜ì—¬ Botì„ ë§Œë“¤ì–´ë³´ìğŸ™Œ</p>\n<hr>\n<h3 id=\"ï¸-1-mattermost-bot-ë§Œë“¤ê¸°\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-1-mattermost-bot-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"ï¸ 1 mattermost bot ë§Œë“¤ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 1. Mattermost Bot ë§Œë“¤ê¸°</h3>\n<blockquote>\n<p>ë©”ë‰´ìˆœì„œ : ë”ë³´ê¸° -> í†µí•©(integration) -> Bot Account -> ë´‡ ê³„ì • ë§Œë“¤ê¸°</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABeUlEQVQoz41Sv0sDMRjtP+vuIHZwloIILiI6uPsD3ezi4KQOHURwsQhtwfbUKmfvkktyl9yTF8yR1ioGHsnd930v78v3WkUhIUSOyiiURkEpBecc6rr24LksS4RlrfX/AkIeUVUVWhe9KXa7E+xfTtF/nkErAWtdQ8AkkgyGIyTJi48pbeDcNxHgdy5jDFqPE4Xrvsbd0OD9s0Ahpb8ZUWKWZWivrWJnu4N4hXjY2Unr6mGGo5sUJ7cpBkkOrSTsAmFlHdqbB+jsneLp1eJ+pJGkVZMzRyiFgIggfyisoasaW90cG2cZ1o8/sHL4hvOe8Dmh9YZQCA5FeqJFwkDKd3RGAk5TL0fj4Za1HCtbppDgUKQs/DCMKWHKyl+y9A1JEPCXQv7XWvsiIljm34Sxv/hNfxK0RuzFeCjeNnG7vxGSIE1Tj6IovFLui/byhLGygJAQt0x1weQEi/M8n/NlMxSSMEgDEwyEQqohGeM8h3dk3WQ8bvLCs3wB8YmgDCg4iBoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ì‚¬ì§„1\"\n        title=\"ì‚¬ì§„1\"\n        src=\"/static/8f0e9801e28ebc4ec799de031fc3373f/37523/1.png\"\n        srcset=\"/static/8f0e9801e28ebc4ec799de031fc3373f/e9ff0/1.png 180w,\n/static/8f0e9801e28ebc4ec799de031fc3373f/f21e7/1.png 360w,\n/static/8f0e9801e28ebc4ec799de031fc3373f/37523/1.png 720w,\n/static/8f0e9801e28ebc4ec799de031fc3373f/302a4/1.png 1080w,\n/static/8f0e9801e28ebc4ec799de031fc3373f/07a9c/1.png 1440w,\n/static/8f0e9801e28ebc4ec799de031fc3373f/1105b/1.png 2940w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<hr>\n<h3 id=\"ï¸-2-websocket-ì„¤ì •\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-2-websocket-%EC%84%A4%EC%A0%95\" aria-label=\"ï¸ 2 websocket ì„¤ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 2. Websocket ì„¤ì •</h3>\n<blockquote>\n<ol>\n<li>ë©”íƒ€ëª¨ìŠ¤íŠ¸ ì›¹ì‚¬ì´íŠ¸ì— ë¡œê·¸ì¸í•©ë‹ˆë‹¤.</li>\n<li>í™”ë©´ ìƒë‹¨ì˜ â€˜Toolsâ€™ ë©”ë‰´ë¥¼ í´ë¦­í•©ë‹ˆë‹¤.</li>\n<li>â€˜Optionsâ€™ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</li>\n<li>ì™¼ìª½ ë©”ë‰´ì—ì„œ â€˜Serverâ€™ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</li>\n<li>â€˜Enable WebSocket serverâ€™ ì˜µì…˜ì„ í™œì„±í™”í•©ë‹ˆë‹¤.</li>\n<li>ì›¹ì†Œì¼“ ì„œë²„ ì£¼ì†Œë¥¼ ì…ë ¥í•©ë‹ˆë‹¤. (ì˜ˆ: wss://server.example.com)</li>\n<li>â€˜Saveâ€™ ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.</li>\n</ol>\n</blockquote>\n<hr>\n<h3 id=\"ï¸-3-ë´‡-ì´ˆê¸°-ì„¤ì •-ì½”ë“œ\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-3-%EB%B4%87-%EC%B4%88%EA%B8%B0-%EC%84%A4%EC%A0%95-%EC%BD%94%EB%93%9C\" aria-label=\"ï¸ 3 ë´‡ ì´ˆê¸° ì„¤ì • ì½”ë“œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 3. ë´‡ ì´ˆê¸° ì„¤ì • ì½”ë“œ</h3>\n<blockquote>\n<p>ë¨¼ì € ê´€ë¦¬ì ë„êµ¬ -> ì‚¬ìš©ì -> ë´‡ê³„ì •ì˜ ì´ë©”ì¼ê³¼ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì„¸íŒ…í•´ì£¼ì„¸ìš”<br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">(</span>\n\tSAMPLE_NAME       <span class=\"token operator\">=</span> <span class=\"token string\">\"ë©”íƒ€ë´‡\"</span>\n\tMATTERMOST_ADDR   <span class=\"token operator\">=</span> <span class=\"token string\">\"http://ë©”íƒ€ëª¨ìŠ¤íŠ¸ url\"</span>\n\tMATTERMOST_WSADDR <span class=\"token operator\">=</span> <span class=\"token string\">\"ws://ë©”íƒ€ëª¨ìŠ¤íŠ¸ url\"</span>\n\n\tUSER_EMAIL    <span class=\"token operator\">=</span> <span class=\"token string\">\"ë´‡ê³„ì •@ì´ë©”ì¼\"</span>\n\tUSER_PASSWORD <span class=\"token operator\">=</span> <span class=\"token string\">\"íŒ¨ìŠ¤ì›Œë“œ \"</span>\n\tUSER_NAME     <span class=\"token operator\">=</span> <span class=\"token string\">\"BOT\"</span>\n\tUSER_FIRST    <span class=\"token operator\">=</span> <span class=\"token string\">\"ë©”íƒ€ëª¨ìŠ¤íŠ¸\"</span>\n\tUSER_LAST     <span class=\"token operator\">=</span> <span class=\"token string\">\"ë´‡\"</span>\n\n\tTEAM_NAME         <span class=\"token operator\">=</span> <span class=\"token string\">\"metamon\"</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<hr>\n<h3 id=\"ï¸-4-ì‘ë‹µ-í•¸ë“¤ëŸ¬-ì½”ë“œ\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-4-%EC%9D%91%EB%8B%B5-%ED%95%B8%EB%93%A4%EB%9F%AC-%EC%BD%94%EB%93%9C\" aria-label=\"ï¸ 4 ì‘ë‹µ í•¸ë“¤ëŸ¬ ì½”ë“œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 4. ì‘ë‹µ í•¸ë“¤ëŸ¬ ì½”ë“œ</h3>\n<blockquote>\n<p>ë´‡ì´ ë©¤ë²„ë¡œ ë“¤ì–´ê°€ ìˆëŠ” ì±„ë„ë§Œ ë©”ì„¸ì§€ê°€ ìˆ˜ì‹ ë©ë‹ˆë‹¤<br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">{</span>\t<span class=\"token comment\">//í´ë¼ì´ì–¸íŠ¸ ì—°ê²°</span>\n\t\twebSocketClient<span class=\"token punctuation\">,</span> err <span class=\"token operator\">:=</span> model<span class=\"token punctuation\">.</span><span class=\"token function\">NewWebSocketClient4</span><span class=\"token punctuation\">(</span>MATTERMOST_WSADDR<span class=\"token punctuation\">,</span> client<span class=\"token punctuation\">.</span>AuthToken<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">if</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to connect to the web socket\"</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connected to WS\"</span><span class=\"token punctuation\">)</span>\n\t\twebSocketClient<span class=\"token punctuation\">.</span><span class=\"token function\">Listen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//ì›¹ì†Œì¼“ ì‹¤ì‹œê°„ listen</span>\n\n\t\t<span class=\"token keyword\">for</span> resp <span class=\"token operator\">:=</span> <span class=\"token keyword\">range</span> webSocketClient<span class=\"token punctuation\">.</span>EventChannel <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">HandleWebSocketResponse</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">)</span> <span class=\"token comment\">// ì±„ë„ì˜ ì´ë²¤íŠ¸ë¥¼ forë¬¸ì„ í†µí•´ ìˆ˜ì‹ </span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h3 id=\"ï¸-5-ì±„ë„-ë§¤ì„¸ì§€-ìˆ˜ì‹ -ë°-ë©”ì‹œì§€-ì „ì†¡\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-5-%EC%B1%84%EB%84%90-%EB%A7%A4%EC%84%B8%EC%A7%80-%EC%88%98%EC%8B%A0-%EB%B0%8F-%EB%A9%94%EC%8B%9C%EC%A7%80-%EC%A0%84%EC%86%A1\" aria-label=\"ï¸ 5 ì±„ë„ ë§¤ì„¸ì§€ ìˆ˜ì‹  ë° ë©”ì‹œì§€ ì „ì†¡ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 5. ì±„ë„ ë§¤ì„¸ì§€ ìˆ˜ì‹  ë° ë©”ì‹œì§€ ì „ì†¡</h3>\n<blockquote>\n<p>ë´‡ì´ ì¶”ê°€ëœ ì±„ë„ì˜ ë©”ì„¸ì§€ë¥¼ ì •ê·œí‘œí˜„ì‹ìœ¼ë¡œ ë¶„ë¦¬í•˜ê³  íŠ¹ì • ë‹¨ì–´ì— ë”°ë¼ ë©”ì„¸ì§€ë¥¼ ì‘ë‹µí•˜ëŠ” ë´‡ì„ ë§Œë“ ë‹¤<br></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">func</span> <span class=\"token function\">HandleMsgFromDebuggingChannel</span><span class=\"token punctuation\">(</span>event <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>WebSocketEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">EventType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> model<span class=\"token punctuation\">.</span>WEBSOCKET_EVENT_POSTED <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span>\n\t<span class=\"token punctuation\">}</span>\n\tpost <span class=\"token operator\">:=</span> model<span class=\"token punctuation\">.</span><span class=\"token function\">PostFromJson</span><span class=\"token punctuation\">(</span>strings<span class=\"token punctuation\">.</span><span class=\"token function\">NewReader</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span><span class=\"token function\">GetData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"post\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ë©”ì„¸ì§€ìˆ˜ì‹  / ì±„ë„ID:\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>ChannelId<span class=\"token punctuation\">,</span> <span class=\"token string\">\" / ë©”ì„¸ì§€:\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">if</span> post <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> post<span class=\"token punctuation\">.</span>UserId <span class=\"token operator\">==</span> botUser<span class=\"token punctuation\">.</span>Id <span class=\"token punctuation\">{</span> <span class=\"token comment\">//ë©”ì„¸ì§€ì˜ useridê°€ ë´‡ì˜idì™€ ê°™ë‹¤ë©´ ë¬´ì‹œí•˜ë„ë¡ ì„¤ì •</span>\n\t\t\t<span class=\"token keyword\">return</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">if</span> matched<span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">:=</span> regexp<span class=\"token punctuation\">.</span><span class=\"token function\">MatchString</span><span class=\"token punctuation\">(</span><span class=\"token string\">`!ë‚ ì”¨`</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> matched <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì˜¤ëŠ˜ì˜ ë‚ ì”¨ëŠ” êµ¬ë¦„ë§ìŒ ì…ë‹ˆë‹¤\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Id<span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>ChannelId<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">return</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">if</span> matched<span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">:=</span> regexp<span class=\"token punctuation\">.</span><span class=\"token function\">MatchString</span><span class=\"token punctuation\">(</span><span class=\"token string\">`!ì˜¨ë„`</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> matched <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"í˜„ì¬ ì˜¨ë„ëŠ” 23ë„ ì…ë‹ˆë‹¤\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Id<span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>ChannelId<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">return</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h3 id=\"ï¸-6-ì „ì²´-ì½”ë“œ\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-6-%EC%A0%84%EC%B2%B4-%EC%BD%94%EB%93%9C\" aria-label=\"ï¸ 6 ì „ì²´ ì½”ë“œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âŒ¨ï¸ 6. ì „ì²´ ì½”ë“œ</h3>\n<blockquote>\n<p>ì „ì²´ ì½”ë“œ ì…ë‹ˆë‹¤ ì•„ë˜ í¼ì¹˜ê¸°ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”<br></p>\n</blockquote>\n<details markdown=\"1\">\n<summary>ì ‘ê¸°/í¼ì¹˜ê¸°</summary>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">package</span> main\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token string\">\"os\"</span>\n\t<span class=\"token string\">\"os/signal\"</span>\n\t<span class=\"token string\">\"regexp\"</span>\n\t<span class=\"token string\">\"strings\"</span>\n\n\t<span class=\"token boolean\">_</span> <span class=\"token string\">\"github.com/go-sql-driver/mysql\"</span>\n\n\t<span class=\"token string\">\"github.com/mattermost/mattermost-server/v5/model\"</span>\n\t<span class=\"token boolean\">_</span> <span class=\"token string\">\"github.com/mattn/go-sqlite3\"</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">(</span>\n\t\tSAMPLE_NAME       <span class=\"token operator\">=</span> <span class=\"token string\">\"ë©”íƒ€ë´‡\"</span>\n\tMATTERMOST_ADDR   <span class=\"token operator\">=</span> <span class=\"token string\">\"http://ë©”íƒ€ëª¨ìŠ¤íŠ¸ url\"</span>\n\tMATTERMOST_WSADDR <span class=\"token operator\">=</span> <span class=\"token string\">\"ws://ë©”íƒ€ëª¨ìŠ¤íŠ¸ url\"</span>\n\n\tUSER_EMAIL    <span class=\"token operator\">=</span> <span class=\"token string\">\"ë´‡ê³„ì •@ì´ë©”ì¼\"</span>\n\tUSER_PASSWORD <span class=\"token operator\">=</span> <span class=\"token string\">\"íŒ¨ìŠ¤ì›Œë“œ \"</span>\n\tUSER_NAME     <span class=\"token operator\">=</span> <span class=\"token string\">\"BOT\"</span>\n\tUSER_FIRST    <span class=\"token operator\">=</span> <span class=\"token string\">\"ë©”íƒ€ëª¨ìŠ¤íŠ¸\"</span>\n\tUSER_LAST     <span class=\"token operator\">=</span> <span class=\"token string\">\"ë´‡\"</span>\n\n\tTEAM_NAME         <span class=\"token operator\">=</span> <span class=\"token string\">\"metamon\"</span>\n\tCHANNEL_LOG_NAME  <span class=\"token operator\">=</span> <span class=\"token string\">\"ì±„ë„id1 - ì±„ë„ì—ì„œ view infoë¥¼ ì„¤ì •í•˜ë©´ channel idë¥¼ í™•ì¸í• ìˆ˜ ìˆìŒ\"</span>\n\tCHANNEL_LOG_NAME2 <span class=\"token operator\">=</span> <span class=\"token string\">\"ì±„ë„id2 - ì±„ë„ì—ì„œ view infoë¥¼ ì„¤ì •í•˜ë©´ channel idë¥¼ í™•ì¸í• ìˆ˜ ìˆìŒ\"</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">var</span> client <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>Client4\n<span class=\"token keyword\">var</span> webSocketClient <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>WebSocketClient\n<span class=\"token keyword\">var</span> files <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>FileUploadResponse\n<span class=\"token keyword\">var</span> botUser <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>User\n<span class=\"token keyword\">var</span> botTeam <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>Team\n<span class=\"token keyword\">var</span> debuggingChannel <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>Channel\n\n<span class=\"token comment\">// Documentation for the Go driver can be found</span>\n<span class=\"token comment\">// at https://godoc.org/github.com/mattermost/platform/model#Client</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span>SAMPLE_NAME<span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">SetupGracefulShutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\tclient <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span><span class=\"token function\">NewAPIv4Client</span><span class=\"token punctuation\">(</span>MATTERMOST_ADDR<span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">MakeSureServerIsRunning</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">LoginAsTheBotUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">UpdateTheBotUserIfNeeded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">FindBotTeam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":smile:**`\"</span><span class=\"token operator\">+</span>SAMPLE_NAME<span class=\"token operator\">+</span><span class=\"token string\">\"ì‹œì‘`**:smile:\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> CHANNEL_LOG_NAME<span class=\"token punctuation\">)</span>\n\n\t<span class=\"token comment\">// Lets start listening to some channels via the websocket!</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">{</span>\n\t\twebSocketClient<span class=\"token punctuation\">,</span> err <span class=\"token operator\">:=</span> model<span class=\"token punctuation\">.</span><span class=\"token function\">NewWebSocketClient4</span><span class=\"token punctuation\">(</span>MATTERMOST_WSADDR<span class=\"token punctuation\">,</span> client<span class=\"token punctuation\">.</span>AuthToken<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token keyword\">if</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to connect to the web socket\"</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connected to WS\"</span><span class=\"token punctuation\">)</span>\n\t\twebSocketClient<span class=\"token punctuation\">.</span><span class=\"token function\">Listen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\t\t<span class=\"token keyword\">for</span> resp <span class=\"token operator\">:=</span> <span class=\"token keyword\">range</span> webSocketClient<span class=\"token punctuation\">.</span>EventChannel <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">HandleWebSocketResponse</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">MakeSureServerIsRunning</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> props<span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">GetOldClientConfig</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"There was a problem pinging the Mattermost server.  Are you sure it's running?\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t\tos<span class=\"token punctuation\">.</span><span class=\"token function\">Exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Server detected and is running version \"</span> <span class=\"token operator\">+</span> props<span class=\"token punctuation\">[</span><span class=\"token string\">\"Version\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">LoginAsTheBotUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> user<span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">Login</span><span class=\"token punctuation\">(</span>USER_EMAIL<span class=\"token punctuation\">,</span> USER_PASSWORD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"There was a problem logging into the Mattermost server.  Are you sure ran the setup steps from the README.md?\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t\tos<span class=\"token punctuation\">.</span><span class=\"token function\">Exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\tbotUser <span class=\"token operator\">=</span> user\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">UpdateTheBotUserIfNeeded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> botUser<span class=\"token punctuation\">.</span>FirstName <span class=\"token operator\">!=</span> USER_FIRST <span class=\"token operator\">||</span> botUser<span class=\"token punctuation\">.</span>LastName <span class=\"token operator\">!=</span> USER_LAST <span class=\"token operator\">||</span> botUser<span class=\"token punctuation\">.</span>Username <span class=\"token operator\">!=</span> USER_NAME <span class=\"token punctuation\">{</span>\n\t\tbotUser<span class=\"token punctuation\">.</span>FirstName <span class=\"token operator\">=</span> USER_FIRST\n\t\tbotUser<span class=\"token punctuation\">.</span>LastName <span class=\"token operator\">=</span> USER_LAST\n\t\tbotUser<span class=\"token punctuation\">.</span>Username <span class=\"token operator\">=</span> USER_NAME\n\n\t\t<span class=\"token keyword\">if</span> user<span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">UpdateUser</span><span class=\"token punctuation\">(</span>botUser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to update the Sample Bot user\"</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t\t\tos<span class=\"token punctuation\">.</span><span class=\"token function\">Exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t\tbotUser <span class=\"token operator\">=</span> user\n\t\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Looks like this might be the first run so we've updated the bots account settings\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">FindBotTeam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> team<span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">GetTeamByName</span><span class=\"token punctuation\">(</span>TEAM_NAME<span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to get the initial load\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"or we do not appear to be a member of the team '\"</span> <span class=\"token operator\">+</span> TEAM_NAME <span class=\"token operator\">+</span> <span class=\"token string\">\"'\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t\tos<span class=\"token punctuation\">.</span><span class=\"token function\">Exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\tbotTeam <span class=\"token operator\">=</span> team\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">CreateBotDebuggingChannelIfNeeded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> rchannel<span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">GetChannelByName</span><span class=\"token punctuation\">(</span>CHANNEL_LOG_NAME<span class=\"token punctuation\">,</span> botTeam<span class=\"token punctuation\">.</span>Id<span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to get the channels\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\tdebuggingChannel <span class=\"token operator\">=</span> rchannel\n\t\t<span class=\"token keyword\">return</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span>msg <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> replyToId <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> channelid <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tpost <span class=\"token operator\">:=</span> <span class=\"token operator\">&amp;</span>model<span class=\"token punctuation\">.</span>Post<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\tpost<span class=\"token punctuation\">.</span>ChannelId <span class=\"token operator\">=</span> channelid\n\tpost<span class=\"token punctuation\">.</span>Message <span class=\"token operator\">=</span> msg\n\n\t<span class=\"token comment\">//post.RootId = replyToId</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token boolean\">_</span><span class=\"token punctuation\">,</span> resp <span class=\"token operator\">:=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">CreatePost</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> resp<span class=\"token punctuation\">.</span>Error <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We failed to send a message to the logging channel\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">HandleWebSocketResponse</span><span class=\"token punctuation\">(</span>event <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>WebSocketEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">HandleMsgFromDebuggingChannel</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">HandleMsgFromDebuggingChannel</span><span class=\"token punctuation\">(</span>event <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>WebSocketEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">defer</span> <span class=\"token keyword\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">recover</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\t<span class=\"token keyword\">if</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">EventType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> model<span class=\"token punctuation\">.</span>WEBSOCKET_EVENT_POSTED <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tpost <span class=\"token operator\">:=</span> model<span class=\"token punctuation\">.</span><span class=\"token function\">PostFromJson</span><span class=\"token punctuation\">(</span>strings<span class=\"token punctuation\">.</span><span class=\"token function\">NewReader</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span><span class=\"token function\">GetData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"post\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ë©”ì„¸ì§€ìˆ˜ì‹  / ì±„ë„ID:\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>ChannelId<span class=\"token punctuation\">,</span> <span class=\"token string\">\" / ë©”ì„¸ì§€:\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">if</span> post <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">if</span> post<span class=\"token punctuation\">.</span>UserId <span class=\"token operator\">==</span> botUser<span class=\"token punctuation\">.</span>Id <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">if</span> matched<span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">:=</span> regexp<span class=\"token punctuation\">.</span><span class=\"token function\">MatchString</span><span class=\"token punctuation\">(</span><span class=\"token string\">`!ë‚ ì”¨`</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> matched <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"í˜„ì¬ ë‚ ì”¨ëŠ” 23ë„ì…ë‹ˆë‹¤\"</span><span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>Id<span class=\"token punctuation\">,</span> post<span class=\"token punctuation\">.</span>ChannelId<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">return</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">PrintError</span><span class=\"token punctuation\">(</span>err <span class=\"token operator\">*</span>model<span class=\"token punctuation\">.</span>AppError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\tError Details:\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\t\\t\"</span> <span class=\"token operator\">+</span> err<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\t\\t\"</span> <span class=\"token operator\">+</span> err<span class=\"token punctuation\">.</span>Id<span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\t\\t\"</span> <span class=\"token operator\">+</span> err<span class=\"token punctuation\">.</span>DetailedError<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">SetupGracefulShutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tc <span class=\"token operator\">:=</span> <span class=\"token function\">make</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">chan</span> os<span class=\"token punctuation\">.</span>Signal<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\tsignal<span class=\"token punctuation\">.</span><span class=\"token function\">Notify</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">,</span> os<span class=\"token punctuation\">.</span>Interrupt<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">go</span> <span class=\"token keyword\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">range</span> c <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">if</span> webSocketClient <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\t\t\twebSocketClient<span class=\"token punctuation\">.</span><span class=\"token function\">Close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token function\">SendMsgToDebuggingChannel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":disappointed_relieved:**`\"</span><span class=\"token operator\">+</span>SAMPLE_NAME<span class=\"token operator\">+</span><span class=\"token string\">\"ì •ì§€`**:disappointed_relieved:\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> CHANNEL_LOG_NAME<span class=\"token punctuation\">)</span>\n\t\t\tos<span class=\"token punctuation\">.</span><span class=\"token function\">Exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n</details>\n<hr>\n<h3 id=\"ì°¸ê³ ì‚¬ì´íŠ¸\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\" aria-label=\"ì°¸ê³ ì‚¬ì´íŠ¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì°¸ê³ ì‚¬ì´íŠ¸</h3>\n<blockquote>\n<p><a href=\"https://github.com/mattermost/mattermost-bot-sample-golang/blob/master/bot_sample.go\">https://github.com/mattermost/mattermost-bot-sample-golang/blob/master/bot_sample.go</a></p>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EC%86%8C%EA%B0%9C\">ğŸ‘‹ ì†Œê°œ</a></p>\n<ul>\n<li><a href=\"#%EF%B8%8F-1-mattermost-bot-%EB%A7%8C%EB%93%A4%EA%B8%B0\">âŒ¨ï¸ 1. Mattermost Bot ë§Œë“¤ê¸°</a></li>\n<li><a href=\"#%EF%B8%8F-2-websocket-%EC%84%A4%EC%A0%95\">âŒ¨ï¸ 2. Websocket ì„¤ì •</a></li>\n<li><a href=\"#%EF%B8%8F-3-%EB%B4%87-%EC%B4%88%EA%B8%B0-%EC%84%A4%EC%A0%95-%EC%BD%94%EB%93%9C\">âŒ¨ï¸ 3. ë´‡ ì´ˆê¸° ì„¤ì • ì½”ë“œ</a></li>\n<li><a href=\"#%EF%B8%8F-4-%EC%9D%91%EB%8B%B5-%ED%95%B8%EB%93%A4%EB%9F%AC-%EC%BD%94%EB%93%9C\">âŒ¨ï¸ 4. ì‘ë‹µ í•¸ë“¤ëŸ¬ ì½”ë“œ</a></li>\n<li><a href=\"#%EF%B8%8F-5-%EC%B1%84%EB%84%90-%EB%A7%A4%EC%84%B8%EC%A7%80-%EC%88%98%EC%8B%A0-%EB%B0%8F-%EB%A9%94%EC%8B%9C%EC%A7%80-%EC%A0%84%EC%86%A1\">âŒ¨ï¸ 5. ì±„ë„ ë§¤ì„¸ì§€ ìˆ˜ì‹  ë° ë©”ì‹œì§€ ì „ì†¡</a></li>\n<li><a href=\"#%EF%B8%8F-6-%EC%A0%84%EC%B2%B4-%EC%BD%94%EB%93%9C\">âŒ¨ï¸ 6. ì „ì²´ ì½”ë“œ</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0%EC%82%AC%EC%9D%B4%ED%8A%B8\">ì°¸ê³ ì‚¬ì´íŠ¸</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"May 28, 2023","title":"[ë¸”ë¡œê·¸] êµ¬ê¸€ê´‘ê³  ì—°ë™ with Gastby - Google Adsense(1)","categories":"ë¸”ë¡œê·¸","author":"sb","emoji":"ğŸ¤–"},"fields":{"slug":"/3-blog-ga-1/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://sbbb.me","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/3-blog-ga-2/","nextSlug":"/3-blog-ga-1/","prevSlug":""}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}